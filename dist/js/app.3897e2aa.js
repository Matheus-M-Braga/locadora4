(function(){var e={6700:function(e,t,a){var s={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":941,"./en-il.js":941,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":8227,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":8227,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=o,e.exports=r,r.id=6700},8625:function(e,t,a){"use strict";var s=a(144),r=a(998),o=function(){var e=this,t=e._self._c;return t(r.Z,[t("LayoutPage"),t("router-view")],1)},i=[],l=a(6232),n=a(5550),d=a(4562),c=a(4324),u=a(3201),h=a(5808),m=a(4525),p=a(4611),g=a(8279),f=a(3059),y=a(7233),b=a(3687),v=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("nav",[t(y.Z,{staticClass:"sidebar",attrs:{temporary:"",absolute:"",dark:""},model:{value:a.isDrawerOpen,callback:function(e){a.isDrawerOpen=e},expression:"isDrawerOpen"}},[t(h.Z,[t(m.Z,[t(u.Z,{staticClass:"header_side",attrs:{flex:""}},[t(n.Z,{staticClass:"menu_icon",attrs:{large:""},on:{click:function(e){a.isDrawerOpen=!a.isDrawerOpen}}}),t("div",{staticClass:"d-flex align-center white--text",staticStyle:{"font-size":"22px"}},[t(c.Z,[e._v("mdi-bookshelf")]),e._v("WDA Livraria ")],1),t("div")],1)],1),e._l(e.links,(function(a){return t(m.Z,{key:a.text,attrs:{flat:"",router:"",to:a.route}},[t(p.Z,[t(c.Z,[e._v(e._s(a.icon))])],1),t(g.V9,[e._v(e._s(a.text))])],1)}))],2)],1),t(l.Z,{attrs:{app:"",dark:""}},[t(n.Z,{staticClass:"menu_icon",on:{click:function(e){a.isDrawerOpen=!a.isDrawerOpen}}}),t("div",{staticClass:"d-flex align-center"},[t(d.Z,{attrs:{href:"/"}},[t(c.Z,[e._v("mdi-bookshelf")]),e._v(" WDA LIVRARIA")],1)],1),t(b.Z)],1),t(f.Z,[e._t("default")],2)],1)},D=[];const x={data(){return{links:[{icon:"mdi-widgets",text:"Dashboard",route:"/"},{icon:"mdi-account",text:"Usuário",route:"/usuario"},{icon:"mdi-book",text:"Livro",route:"/livro"},{icon:"mdi-pencil",text:"Editora",route:"/editora"},{icon:"mdi-book-account",text:"Aluguel",route:"/aluguel"}]}}};var k=Object.assign(x,{__name:"LayoutPage",setup(e){const t=(0,s.iH)(!1);return{__sfc:!0,isDrawerOpen:t}}}),j=k,Z=a(1001),C=(0,Z.Z)(j,v,D,!1,null,null,null),P=C.exports,B={name:"App",components:{LayoutPage:P},computed:{}},w=B,M=(0,Z.Z)(w,o,i,!1,null,null,null),_=M.exports,O=a(8345),E=a(9582),T=a(4886),S=a(9256),z=a(1267),R=function(){var e=this,t=e._self._c;return t(S.Z,{staticClass:"pa-6",attrs:{fluid:""}},[t(u.Z,{staticClass:"cardsLayout",attrs:{row:"","justify-content-center":""}},e._l(e.cards,(function(a){return t(z.Z,{key:a.id,staticClass:"cardsFlex",attrs:{sm6:"",xs12:"",md6:"",lg4:""}},[t(E.Z,{staticClass:"ma-2",attrs:{dark:"",elevation:"4",loading:e.loadingCard}},[t(T.EB,[t(c.Z,{attrs:{left:"",large:""}},[e._v(e._s(a.icon))]),e._v(" "+e._s(a.title)+" ")],1),t(T.ZB,{staticClass:"text-subtitle-1"},[e._v(" "+e._s(a.value)+" ")])],1)],1)})),1),t(z.Z,{staticClass:"mt-6 chartsGroup",attrs:{row:"","justify-space-around":"",wrap:""}},[t("LineChart"),t("PieChart")],1)],1)},I=[],N=a(3305),$=function(){var e=this,t=e._self._c;return t(E.Z,{staticClass:"col-6 charts",attrs:{elevation:"4",outlined:""}},[0===e.rentals.length?t(N.Z,{staticClass:"center-progress mt-12",attrs:{color:"blue lighten-3",indeterminate:"",size:150}}):e._e(),t("canvas",{ref:"myChart",staticClass:"chartBar",style:{display:e.mostrented.length>0?"block":"none"},attrs:{width:"450",height:"200"}})],1)},A=[],q=a(7757),U=a.n(q),L=a(6154);const V=L.Z.create({baseURL:"https://localhost:7126/api/"});var F=V,Y={list:e=>(e||(e={}),F.get("rentals",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),create:e=>F.post("rentals",e),update:e=>F.put(`rentals/${e.id}`,e),delete:e=>F.delete(`rentals/${e.id}`,{rental:e})},W={data(){return{rentals:[],total:0,mostrented:[],loadingChart:!0}},mounted(){this.getRentals()},methods:{async getRentals(){try{const e=await Y.list();if(this.total=e.data.totalRegisters,this.total>0){const e=await Y.list({PageSize:this.total});this.rentals=e.data}const t={};this.rentals.data.forEach((e=>{const a=e.book.name;t[a]?t[a]++:t[a]=1})),this.mostrented=Object.keys(t).sort(((e,a)=>t[a]-t[e])).map((e=>({bookname:e,quantity:t[e]})))}catch(e){console.error(e)}finally{this.loadingChart=!1,this.updateBarChart()}},truncateLabel(e){const t=13;return e.length>t?e.substring(0,t)+"...":e},async updateBarChart(){const e=this.$refs.myChart.getContext("2d"),t=this.mostrented.slice(0,3);var a=t.map((e=>this.truncateLabel(e.bookname))),s=t.map((e=>this.truncateLabel(e.quantity)));new(U())(e,{type:"bar",data:{labels:a,datasets:[{label:"",data:s,backgroundColor:["rgb(168, 71, 82)","rgb(51, 126, 204)","rgb(255, 204, 0)","rgb(51, 204, 204)","rgb(123, 104, 238)"],borderWidth:0}]},options:{scales:{yAxes:[{ticks:{display:!1},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1}}]},legend:{display:!1},title:{display:!0,text:"Livros mais alugados",fontSize:25,fontFamily:"Roboto"},maintainAspectRatio:!1}})}}},H=W,Q=(0,Z.Z)(H,$,A,!1,null,null,null),G=Q.exports,J=function(){var e=this,t=e._self._c;return t(E.Z,{staticClass:"col-6 charts",attrs:{elevation:"4"}},[0===e.rentals.length?t(N.Z,{staticClass:"center-progress mt-12",attrs:{color:"blue lighten-3",indeterminate:"",size:150}}):e._e(),t("canvas",{ref:"myPieChart",staticClass:"chartPie",style:{display:e.rentals.length>0?"block":"none"},attrs:{width:"450",height:"200"}})],1)},K=[],X={data(){return{rentals:[],total:0,registers:[],loadingChart:!0}},mounted(){this.listStatus()},methods:{async listStatus(){try{const e=await Y.list();if(this.total=e.data.totalRegisters,this.total>0){const e=await Y.list({PageSize:this.total});this.registers=e.data}const t={"No prazo":0,Atrasado:0,Pendente:0};this.registers.data.forEach((e=>{const a=e.status;"Atrasado"===a?t["Atrasado"]++:"No prazo"===a?t["No prazo"]++:"Pendente"===a&&t["Pendente"]++}));const a=Object.entries(t);this.rentals=a}catch(e){console.error("Erro ao buscar dados:",e)}finally{this.loadingChart=!1,this.updatePieChart()}},updatePieChart(){const e=this.rentals.map((e=>e[0])),t=this.rentals.map((e=>e[1])),a=this.$refs.myPieChart.getContext("2d");new(U())(a,{type:"pie",data:{labels:e,datasets:[{data:t,fill:!1,backgroundColor:["rgb(2, 149, 90)","rgb(168, 45, 54)","rgb(235, 204, 0)"],borderColor:["rgb(2, 149, 90)","rgb(168, 45, 54)","rgb(235, 204, 0)"],borderWidth:1}]},options:{indexAxis:"x",title:{display:!0,text:"Status de Aluguéis",fontSize:25,fontFamily:"Roboto"},maintainAspectRatio:!1}})}}},ee=X,te=(0,Z.Z)(ee,J,K,!1,null,null,null),ae=te.exports,se={list:e=>(e||(e={}),F.get("users",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),listSelect:()=>F.get("users/getsummary"),create:e=>F.post("users",e),update:e=>F.put(`users/${e.id}`,e),delete:e=>F.delete(`users/${e.id}`,{user:e})},re={list:e=>(e||(e={}),F.get("books",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),listSelect:()=>F.get("books/getsummary"),create:e=>F.post("books",e),update:e=>F.put(`books/${e.id}`,e),delete:e=>F.delete(`books/${e.id}`,{book:e})},oe={list:e=>(e||(e={}),F.get("publishers",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),listSelect:()=>F.get("publishers/getsummary"),create:e=>F.post("publishers",e),update:e=>F.put(`publishers/${e.id}`,e),delete:e=>F.delete(`publishers/${e.id}`,{publisher:e})},ie={data:()=>({cards:[{id:0,title:"Último livro alugado",icon:"mdi-book-sync",value:""},{id:1,title:"Total de Aluguéis",icon:"mdi-book-account",value:""},{id:2,title:"Livros disponíveis",icon:"mdi-book-check",value:""},{id:3,title:"Livros Cadastrados",icon:"mdi-book-open-variant",value:""},{id:4,title:"Usuários cadastrados",icon:"mdi-account",value:""},{id:5,title:"Editoras cadastradas",icon:"mdi-pencil",value:""}],loadingCard:!0,books:[],totalBooks:0,availableBooks:0,rentals:[],totalRentals:0,lastRented:"",totalUsers:0,totalPublishers:0}),async mounted(){try{await this.getBooks(),await this.getRentals(),await this.getUsers(),await this.getPublishers(),await this.getAvailableBooks(),await this.lastRent(),this.updateCardValues()}catch(e){console.error("Erro ao carregar dados:",e)}finally{this.loadingCard=!1}},components:{LineChart:G,PieChart:ae},methods:{updateCardValues(){this.cards[0].value=this.lastRented,this.cards[1].value=this.totalRentals,this.cards[2].value=this.availableBooks,this.cards[3].value=this.totalBooks,this.cards[4].value=this.totalUsers,this.cards[5].value=this.totalPublishers},async getBooks(){try{const e=await re.list();if(this.totalBooks=e.data.totalRegisters,this.totalBooks>0){const e=await re.list({PageSize:this.totalBooks});this.books=e.data.data}}catch(e){console.error("Erro ao buscar livros: ",e)}},async getRentals(){try{const e=await Y.list();if(this.totalRentals=e.data.totalRegisters,this.totalRentals>0){const e=await Y.list({PageSize:this.totalRentals});this.rentals=e.data.data}}catch(e){console.error("Erro ao buscar aluguéis: ",e)}},async getUsers(){try{const e=await se.list();this.totalUsers=e.data.totalRegisters}catch(e){console.error("Erro ao buscar usuários:",e)}},async getPublishers(){try{const e=await oe.list();this.totalPublishers=e.data.totalRegisters}catch(e){console.error("Erro ao buscar editora: ",e)}},async getAvailableBooks(){this.availableBooks=await this.books.reduce(((e,t)=>e+t.quantity),0)},async lastRent(){if(this.rentals.length>0){const e=await this.rentals.reduce(((e,t)=>e.id<t.id?t:e));this.lastRented=e.book.name}else this.lastRented="Sem dados"}}},le=ie,ne=(0,Z.Z)(le,R,I,!1,null,null,null),de=ne.exports,ce=a(266),ue=a(2015),he=a(4061),me=a(5125),pe=a(1713),ge=a(7808),fe=function(){var e=this,t=e._self._c;return t("div",[t(S.Z,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(pe.Z,{staticClass:"table",attrs:{wrap:""}},[t(ue.Z,{staticClass:"elevation-1",attrs:{dark:"",loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.users,"server-items-length":e.totalItems,"items-per-page":e.pageSize,page:e.page,search:e.search,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890","item-key":"id"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.acoes",fn:function({item:a}){return[t("td",[t(c.Z,{staticClass:"mr-2",on:{click:function(t){return e.openModalEdit(a)}}},[e._v(" mdi-pencil ")]),t(c.Z,{staticClass:"mr-2",on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")])],1)]}}],null,!0)})],1)],1),t(pe.Z,{attrs:{justify:"center"}},[t(he.Z,{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(me.Z,{ref:"",attrs:{form:""}},[t(E.Z,{attrs:{dark:""}},[t(T.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(T.ZB,[t(ce.Z,[t(me.Z,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{label:"Nome",counter:50,required:"",rules:e.stringRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:50,label:"Cidade",required:"",rules:e.stringRules},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:50,label:"Endereço",required:"",rules:e.stringRules},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:50,label:"Email",type:"email",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1)],1)],1),t(T.h7,[t(b.Z),t(d.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(d.Z,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}})],1)},ye=[],be=a(6455),ve=a.n(be),De=a(6313),xe=a(7953),ke=function(){var e=this,t=e._self._c;return t(De.Z,{staticClass:"top sm-height-100"},[t(pe.Z,{staticClass:"my-0 mx-0",attrs:{align:"center"}},[t(xe.qW,{staticClass:"title subheading text-h4 mr-15"},[e._v(e._s(e.PageTitle))]),t(d.Z,{staticClass:"newBtn",attrs:{dark:""},on:{click:e.openModalCreate}},[e._v("Novo "),t(c.Z,[e._v("mdi-plus")])],1)],1),t(b.Z),t(ge.Z,{attrs:{dense:"","hide-details":"",label:"Pesquisar",outlined:"","prepend-inner-icon":"mdi-magnify",filled:""},model:{value:e.localSearch,callback:function(t){e.localSearch=t},expression:"localSearch"}})],1)},je=[],Ze={props:{PageTitle:String,search:String},data(){return{localSearch:this.search}},watch:{localSearch(e){this.$emit("updateSearch",e)}},methods:{openModalCreate(){this.$emit("open-modal")}}},Ce=Ze,Pe=(0,Z.Z)(Ce,ke,je,!1,null,null,null),Be=Pe.exports,we=function(){var e=this,t=e._self._c;return t(he.Z,{attrs:{persistent:"","max-width":"480"},model:{value:e.internalDialogDelete,callback:function(t){e.internalDialogDelete=t},expression:"internalDialogDelete"}},[t(E.Z,{staticClass:"modalDelete",attrs:{dark:""}},[t(T.EB,{staticClass:"d-flex justify-center"},[t("span",{staticClass:"text-h5"},[e._v("Excluir "+e._s(e.EntityName))])]),t(T.ZB,{staticClass:"d-flex justify-center pb-3 pt-3"},[e._v(" Tem certeza que deseja excluir o item selecionado? ")]),t(T.h7,{staticClass:"d-flex justify-center"},[t(d.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModalDelete}},[e._v(" Cancelar ")]),t(d.Z,{attrs:{color:"green darken-1",text:""},on:{click:e.confirmDelete}},[e._v(" Confirmar ")])],1)],1)],1)},Me=[],_e={props:{dialogDelete:Boolean,EntityName:String},data(){return{internalDialogDelete:this.dialogDelete}},watch:{dialogDelete(e){this.internalDialogDelete=e}},methods:{closeModalDelete(){this.$emit("close-modal-delete")},confirmDelete(){this.$emit("confirm-delete")}}},Oe=_e,Ee=(0,Z.Z)(Oe,we,Me,!1,null,null,null),Te=Ee.exports,Se={components:{TableTop:Be,ModalDelete:Te},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Usuários",EntityName:"Usuário",headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Cidade",value:"city"},{text:"Endereço",value:"address"},{text:"Email",value:"email"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},users:[],id:0,name:"",address:"",city:"",email:"",totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,userId:null,emailExists:!1,loadingTable:!0,stringRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres"],emailRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres",e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Informe um email válido"]}},mounted(){this.getUsers()},methods:{updateSearch(e){this.search=e,this.page=1,this.getUsers()},async getUsers(){try{const e=await se.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.users=e.data.data,this.totalItems=e.data.totalRegisters}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.users=[])}finally{this.loadingTable=!1}},handleOptionsUpdate(e){const t={id:"Id",name:"Name",city:"City",address:"Address",email:"Email"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getUsers()},openModalCreate(){this.ModalTitle="Adicionar Usuário",this.dialog=!0,this.$refs.form.resetValidation(),this.name="",this.address="",this.city="",this.email=""},openModalEdit(e){this.ModalTitle="Editar Usuário",this.dialog=!0,this.userId=e.id,this.name=e.name,this.address=e.address,this.city=e.city,this.email=e.email,this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Usuário"===this.ModalTitle){const e={name:this.name,address:this.address,city:this.city,email:this.email};se.create(e).then((()=>{ve().fire({icon:"success",title:"Usuário adicionado com êxito!",showConfirmButton:!1,timer:3500}),this.getUsers(),this.closeModal()})).catch((e=>{console.error("Erro ao adicionar o usuario:",e),ve().fire({icon:"error",title:"Erro ao adicionar usuário.",text:e.response.data.message,showConfirmButton:!1,timer:3500})}))}else{const e={id:this.userId,name:this.name,address:this.address,city:this.city,email:this.email};se.update(e).then((()=>{ve().fire({icon:"success",title:"Usuário atualizado com êxito!",showConfirmButton:!1,timer:3500}),this.getUsers(),this.closeModal()})).catch((e=>{console.error("Erro ao atualizar usuário:",e),ve().fire({icon:"success",title:"Erro ao atualizar usuário.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModal()}))}}},openModalDelete(e){this.userId=e.id,this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e={id:this.userId};se.delete(e).then((()=>{ve().fire({icon:"success",title:"Usuário deletado com êxito!",showConfirmButton:!1,timer:3500}),this.getUsers(),this.closeModalDelete(),this.page=1})).catch((e=>{console.error("Erro ao deletar a usuário:",e),ve().fire({icon:"error",title:"Erro ao deletar usuário.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()}))}}},ze=Se,Re=(0,Z.Z)(ze,fe,ye,!1,null,null,null),Ie=Re.exports,Ne=a(344),$e=function(){var e=this,t=e._self._c;return t("div",[t(S.Z,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(pe.Z,{staticClass:"table",attrs:{wrap:""}},[t(ue.Z,{staticClass:"elevation-1",attrs:{loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.books,"server-items-length":e.totalItems,"items-per-page":e.pageSize,page:e.page,search:e.search,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890",dark:"","item-key":"id"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.acoes",fn:function({item:a}){return[t("td",[t(c.Z,{staticClass:"mr-2",on:{click:function(t){return e.openModalEdit(a)}}},[e._v(" mdi-pencil ")]),t(c.Z,{staticClass:"mr-2",on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")])],1)]}}],null,!0)})],1)],1),t(pe.Z,{attrs:{justify:"center"}},[t(he.Z,{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(E.Z,{attrs:{dark:""}},[t(T.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(T.ZB,[t(ce.Z,[t(me.Z,{ref:"form",on:{sumbit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:50,label:"Nome",required:"",rules:e.stringRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:50,label:"Autor",required:"",rules:e.stringRules},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(Ne.Z,{attrs:{items:e.publishers,"item-value":"id","item-text":"name",label:"Editora",required:"",rules:e.publisherRules},model:{value:e.publisher,callback:function(t){e.publisher=t},expression:"publisher"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:4,step:1,label:"Lançamento",required:"",type:"number",rules:e.releaseRules},model:{value:e.release,callback:function(t){e.release=t},expression:"release"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:4,step:1,label:"Estoque",required:"",type:"number",rules:e.quantityRules},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)],1)],1)],1),t(T.h7,[t(b.Z),t(d.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(d.Z,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}})],1)},Ae=[],qe={components:{TableTop:Be,ModalDelete:Te},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Livros",EntityName:"Livro",headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Autor",value:"author"},{text:"Editora",value:"publisher.name"},{text:"Lançamento",value:"release"},{text:"Estoque",value:"quantity"},{text:"Alugados",value:"rented"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},books:[],publishers:[],id:0,name:"",author:"",publisher:null,release:null,quantity:null,rented:0,totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,bookId:null,nameExists:!1,loadingTable:!0,stringRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres"],publisherRules:[e=>!!e||"Preencha este campo"],releaseRules:[e=>!!e||"Preencha este campo",e=>/^\d{4}$/.test(e)||"Informe um ano válido (YYYY)",e=>e&&e<=(new Date).getFullYear()||`Não é possível ser posterior a ${(new Date).getFullYear()}`],quantityRules:[e=>!!e||"Preencha este campo",e=>null!=this.bookId||(e>=0||"Quantidade deve ser maior que 0")]}},mounted(){this.getBooks(),this.getPublishers()},methods:{updateSearch(e){this.search=e,this.page=1,this.getBooks()},async getBooks(){try{const e=await re.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.books=e.data.data,this.totalItems=e.data.totalRegisters}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.books=[])}finally{this.loadingTable=!1}},async getPublishers(){try{const e=await oe.listSelect();this.publishers=e.data.data}catch(e){console.error("Erro ao buscar editoras:",e)}},handleOptionsUpdate(e){const t={id:"Id",name:"Name",author:"Author","publisher.name":"Publisher.Name",release:"Release",quantity:"Quantity",rented:"Rented"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getBooks()},openModalCreate(){this.ModalTitle="Adicionar Livro",this.dialog=!0,this.$refs.form.resetValidation(),this.name="",this.author="",this.publisher=null,this.release="",this.quantity=""},openModalEdit(e){this.ModalTitle="Editar livro",this.dialog=!0,this.bookId=e.id,this.name=e.name,this.author=e.author,this.publisher=e.publisherId,this.release=e.release,this.quantity=e.quantity.toString(),this.rented=e.rented,this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Livro"===this.ModalTitle){const e={name:this.name,author:this.author,publisherId:this.publisher,release:this.release,quantity:this.quantity};re.create(e).then((()=>{ve().fire({icon:"success",title:"Livro adicionado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getBooks(),this.getPublishers()})).catch((e=>{console.error("Erro ao adicionar o livro:",e),ve().fire({icon:"error",title:"Erro ao adicionar o livro.",text:e.response.data.message,showConfirmButton:!1,timer:3500})}))}else{const e={id:this.bookId,name:this.name,author:this.author,publisherId:this.publisher,release:this.release,quantity:this.quantity,rented:this.rented};re.update(e).then((()=>{ve().fire({icon:"success",title:"Livro atualizado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getBooks(),this.getPublishers()})).catch((e=>{console.error("Erro ao atualizar livro:",e),ve().fire({icon:"error",title:"Erro ao atualizar o livro.",text:e.response.data.message,showConfirmButton:!1,timer:3500})}))}}},openModalDelete(e){this.bookId=e.id,this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e={id:this.bookId};re.delete(e).then((()=>{ve().fire({icon:"success",title:"Livro deletado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModalDelete(),this.getBooks(),this.getPublishers(),this.page=1})).catch((e=>{console.error("Erro ao deletar o livro:",e),ve().fire({icon:"error",title:"Erro ao deletar o livro.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()}))}}},Ue=qe,Le=(0,Z.Z)(Ue,$e,Ae,!1,null,null,null),Ve=Le.exports,Fe=function(){var e=this,t=e._self._c;return t("div",[t(S.Z,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(pe.Z,{staticClass:"table",attrs:{wrap:""}},[t(ue.Z,{staticClass:"elevation-1",attrs:{dark:"",loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.publishers,"server-items-length":e.totalItems,"items-per-page":e.pageSize,page:e.page,search:e.search,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890","item-key":"id"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.acoes",fn:function({item:a}){return[t("td",[t(c.Z,{staticClass:"mr-2",on:{click:function(t){return e.openModalEdit(a)}}},[e._v(" mdi-pencil ")]),t(c.Z,{staticClass:"mr-2",on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")])],1)]}}],null,!0)})],1)],1),t(pe.Z,{attrs:{justify:"center"}},[t(he.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(me.Z,{ref:"",attrs:{form:""}},[t(E.Z,{attrs:{dark:""}},[t(T.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(T.ZB,[t(ce.Z,[t(me.Z,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:50,label:"Nome",required:"",rules:e.stringRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{counter:50,label:"Cidade",required:"",rules:e.stringRules},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1)],1)],1),t(T.h7,[t(b.Z),t(d.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(d.Z,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}})],1)},Ye=[],We={components:{TableTop:Be,ModalDelete:Te},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Editoras",EntityName:"Editora",headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Cidade",value:"city"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},publishers:[],id:0,name:"",city:"",totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,publisherId:null,nameExists:!1,loadingTable:!0,stringRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres"]}},mounted(){this.getPublishers()},methods:{updateSearch(e){this.search=e,this.page=1,this.getPublishers()},async getPublishers(){try{const e=await oe.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.publishers=e.data.data,this.totalItems=e.data.totalRegisters}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.publishers=[])}finally{this.loadingTable=!1}},handleOptionsUpdate(e){const t={id:"Id",name:"Name",city:"City"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getPublishers()},openModalCreate(){this.ModalTitle="Adicionar Editora",this.dialog=!0,this.$refs.form.resetValidation(),this.name="",this.city=""},openModalEdit(e){this.ModalTitle="Editar Editora",this.dialog=!0,this.publisherId=e.id,this.name=e.name,this.city=e.city,this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Editora"===this.ModalTitle){const e={name:this.name,city:this.city};oe.create(e).then((()=>{ve().fire({icon:"success",title:"Editora adicionada com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getPublishers()})).catch((e=>{console.error("Erro ao adicionar editora:",e),ve().fire({icon:"error",title:"Erro ao adicionar editora.",text:e.response.data.message,showConfirmButton:!1,timer:3500})}))}else{const e={id:this.publisherId,name:this.name,city:this.city};oe.update(e).then((()=>{ve().fire({icon:"success",title:"Editora atualizada com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getPublishers()})).catch((e=>{console.error("Erro ao atualizar editora:",e),ve().fire({icon:"error",title:"Erro ao atualizar editora.",text:e.response.data.message,showConfirmButton:!1,timer:3500})}))}}},openModalDelete(e){this.publisherId=e.id,this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e={id:this.publisherId};oe.delete(e).then((()=>{ve().fire({icon:"success",title:"Editora deletada com êxito!",showConfirmButton:!1,timer:3500}),this.getPublishers(),this.page=1})).catch((e=>{console.error("Erro ao deletar a editora:",e),ve().fire({icon:"error",title:"Erro ao deletar editora.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()})),this.dialogDelete=!1}}},He=We,Qe=(0,Z.Z)(He,Fe,Ye,!1,null,null,null),Ge=Qe.exports,Je=a(4127),Ke=function(){var e=this,t=e._self._c;return t("div",[t(S.Z,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(u.Z,{staticClass:"table",attrs:{row:"",wrap:""}},[t(ue.Z,{staticClass:"elevation-1",attrs:{dark:"",loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.rentals,"server-items-length":e.totalItems,"items-per-page":e.pageSize,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.status",fn:function({item:a}){return[t("td",[t(Je.Z,{staticClass:"black--text",class:e.statusClass(a)},[e._v(" "+e._s(a.status)+" ")])],1)]}},{key:"item.acoes",fn:function({item:a}){return[t("td",["Pendente"==a.status?t(c.Z,{staticClass:"mr-2",on:{click:function(t){return e.openModalDevol(a)}}},[e._v(" mdi-book ")]):e._e(),"Pendente"==a.status?t(c.Z,{on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")]):e._e()],1)]}}],null,!0)})],1)],1),t(pe.Z,{attrs:{justify:"center"}},[t(he.Z,{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(E.Z,{attrs:{dark:""}},[t(T.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(T.ZB,[t(ce.Z,[t(me.Z,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ce.Z,{attrs:{cols:"12"}},[t(Ne.Z,{attrs:{items:e.books,"item-value":"id","item-text":"name",label:"Livro",required:"",rules:e.Rules},model:{value:e.book,callback:function(t){e.book=t},expression:"book"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(Ne.Z,{attrs:{items:e.users,"item-value":"id","item-text":"name",label:"Usuário",rules:e.Rules,required:""},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{disabled:"",label:"Data do Aluguel (Hoje)",required:"",type:"date"},model:{value:e.rentalDate,callback:function(t){e.rentalDate=t},expression:"rentalDate"}})],1),t(ce.Z,{attrs:{cols:"12"}},[t(ge.Z,{attrs:{rules:e.Rules,label:"Previsão de Devolução",required:"",type:"date",min:e.rentalDate,max:e.MaxDate()},model:{value:e.forecastDate,callback:function(t){e.forecastDate=t},expression:"forecastDate"}})],1)],1)],1)],1),t(T.h7,[t(b.Z),t(d.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(d.Z,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}}),t("ModalDevol",{attrs:{dialogDevol:e.dialogDevol},on:{"close-modal-devol":e.closeModalDevol,"confirm-devol":e.confirmDevol}})],1)},Xe=[],et=function(){var e=this,t=e._self._c;return t(he.Z,{attrs:{persistent:"","max-width":"480"},model:{value:e.internalDialogDevol,callback:function(t){e.internalDialogDevol=t},expression:"internalDialogDevol"}},[t(E.Z,{staticClass:"modalDelete",attrs:{dark:""}},[t(T.EB,{staticClass:"d-flex justify-center"},[t("span",{staticClass:"text-h5"},[e._v("Devolver Livro")])]),t(T.ZB,{staticClass:"d-flex justify-center pb-3 pt-3"},[e._v(" Tem certeza que deseja realizar a devolução do livro selecionado? ")]),t(T.h7,{staticClass:"d-flex justify-center"},[t(d.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModalDevol}},[e._v(" Cancelar ")]),t(d.Z,{attrs:{color:"green darken-1",text:""},on:{click:e.confirmDevol}},[e._v(" Confirmar ")])],1)],1)],1)},tt=[],at={props:{dialogDevol:Boolean},data(){return{internalDialogDevol:this.dialogDevol}},watch:{dialogDevol(e){this.internalDialogDevol=e}},methods:{closeModalDevol(){this.$emit("close-modal-devol")},confirmDevol(){this.$emit("confirm-devol")}}},st=at,rt=(0,Z.Z)(st,et,tt,!1,null,null,null),ot=rt.exports,it={components:{TableTop:Be,ModalDelete:Te,ModalDevol:ot},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Aluguéis",EntityName:"Aluguel",headers:[{text:"ID",value:"id"},{text:"Livro",align:"start",value:"book.name"},{text:"Usuário",value:"user.name"},{text:"Data do Aluguel",value:"rentalDate"},{text:"Previsão de Devolução",value:"forecastDate"},{text:"Data de Devolução",value:"returnDate"},{text:"Status",value:"status"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},rentals:[],books:[],users:[],id:0,book:null,user:null,rentalDate:"",forecastDate:"",returnDate:"",status:"",totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,dialogDevol:!1,rentalId:null,loadingTable:!0,Rules:[e=>!!e||"Preencha este campo"]}},mounted(){this.getRentals(),this.getBooks(),this.getUsers()},methods:{updateSearch(e){const t=/^(\d{1,2})\/?(\d{1,2})?\/?(\d{0,4})?$/;this.page=1,t.test(e)||e.match(/^\d{1,2}\/$/)?this.search=this.parseDate(e):this.search=e,this.getRentals()},MaxDate(){const e=new Date,t=new Date(e);return t.setDate(e.getDate()+30),t.toISOString().substr(0,10)},statusClass(e){return"Atrasado"==e.status?"red":"No prazo"==e.status?"green":"yellow"},formatDate(e){const t=new Date(e),a=new Date(t.getTime()+6e4*t.getTimezoneOffset()),s={year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"};return a.toLocaleDateString("pt-BR",s)},parseDate(e){const t=e.split("/");let a="";if(t.length>=1){const e=t[0];a=`${e}`}if(t.length>=2){const e=t[1];2===e.length&&(a=`${e}-${a}`)}if(t.length>=3){const e=t[2];4===e.length&&(a=`${e}-${a}`)}return a},getCurrentDate(){const e=-180,t=new Date,a=new Date(t.getTime()+60*e*1e3);return a.toISOString().substr(0,10)},async getRentals(){try{const e=await Y.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.rentals=e.data.data,this.totalItems=e.data.totalRegisters,this.rentals.forEach((e=>{e.forecastDate=this.formatDate(e.forecastDate),e.rentalDate=this.formatDate(e.rentalDate),e.returnDate=e.returnDate=e.returnDate?this.formatDate(e.returnDate):null}))}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.rentals=[])}finally{this.loadingTable=!1}},async getBooks(){try{const e=await re.listSelect();this.books=e.data.data}catch(e){console.error("Erro ao buscar informações:",e)}},async getUsers(){try{const e=await se.listSelect();this.users=e.data.data}catch(e){console.error("Erro ao buscar informações:",e)}},handleOptionsUpdate(e){const t={id:"Id","book.name":"Book.Name","user.name":"User.Name",rentalDate:"RentalDate",forecastDate:"ForecastDate",returnDate:"ReturnDate",status:"Status"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getRentals()},openModalCreate(){this.ModalTitle="Adicionar Aluguel",this.dialog=!0,this.book=null,this.user=null,this.rentalDate=this.getCurrentDate(),this.forecastDate="",this.returnDate="",this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Aluguel"===this.ModalTitle){const e={bookId:this.book,userId:this.user,rentalDate:this.rentalDate,forecastDate:this.forecastDate};Y.create(e).then((()=>{ve().fire({icon:"success",title:"Aluguel adicionado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getRentals(),this.getBooks()})).catch((e=>{console.error("Erro ao adicionar o aluguel:",e),ve().fire({icon:"error",title:"Erro ao adicionar o aluguel: ",text:e.response.data.message,showConfirmButton:!1,timer:3500})}))}}},openModalDelete(e){this.update={...e},this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e=this.update;Y.delete(e).then((()=>{ve().fire({icon:"success",title:"Aluguel deletado com êxito!",showConfirmButton:!1,timer:3500}),this.getRentals(),this.getBooks(),this.closeModalDelete(),this.page=1})).catch((e=>{console.error("Erro ao deletar aluguel:",e),ve().fire({icon:"error",title:"Erro ao deletar aluguel!",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()}))},openModalDevol(e){this.dialogDevol=!0,this.update={...e}},confirmDevol(){const e={id:this.update.id,returnDate:(new Date).toISOString().substr(0,10)};Y.update(e).then((e=>{200==e.status&&(ve().fire({icon:"success",title:"Devolução realizada com êxito!",showConfirmButton:!1,timer:3500}),this.closeModalDevol(),this.getRentals(),this.getBooks())})).catch((e=>{console.error("Erro ao devolver aluguel:",e),ve().fire({icon:"error",title:"Erro ao realizar devolução!",text:e.response.data.message,showConfirmButton:!1,timer:3500})}))},closeModalDevol(){this.dialogDevol=!1}}},lt=it,nt=(0,Z.Z)(lt,Ke,Xe,!1,null,null,null),dt=nt.exports;s.ZP.use(O.ZP);const ct=[{path:"/",name:"home",component:de},{path:"/usuario",name:"user",component:Ie},{path:"/livro",name:"book",component:Ve},{path:"/editora",name:"edit",component:Ge},{path:"/aluguel",name:"alug",component:dt}],ut=new O.ZP({mode:"history",base:"/",routes:ct});var ht=ut,mt=a(1705);s.ZP.use(mt.Z);var pt=new mt.Z({}),gt=a(8620);s.ZP.config.productionTip=!0,s.ZP.use(gt.ZP),s.ZP.prototype.$swal=ve(),new s.ZP({router:ht,vuetify:pt,render:e=>e(_)}).$mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var i=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],o=e[c][2];for(var l=!0,n=0;n<s.length;n++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[n])}))?s.splice(n--,1):(l=!1,o<i&&(i=o));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,i=s[0],l=s[1],n=s[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var c=n(a)}for(t&&t(s);d<i.length;d++)o=i[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunklocadora4"]=self["webpackChunklocadora4"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8625)}));s=a.O(s)})();